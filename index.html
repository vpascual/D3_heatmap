 <!DOCTYPE html>
 <html>
   <head>
     <script type="text/javascript" src="d3.v3.min.js"></script>
   </head>
   <meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.tooltip {
  border:1px solid;
  margin:10px;
  padding: 6px;
  z-index: 10px;
}

</style>
  <body>
     <script>
var margin = {top: 20, right: 10, bottom: 20, left: 10};
var width = 700 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;

var namesWidth = 150;
var chartWidth = width - namesWidth;

var tooltip = d3.select("body")
    .append("div")
    .attr('class','tooltip')
    .style("position", "absolute")
    .style("visibility", "hidden")
    .style("background-color", "#ffffff");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var colorScale = d3.scale.linear().range(["#e2e6fb", "#0a64af"]);
var x = d3.time.scale().range([0, chartWidth]);
var y = d3.scale.linear().range([height, 0]);

// this method requires that the first line of the CSV file contains a comma-separated list of column names
d3.csv("mentions_time_top20.csv", function(data) {
  var maxValue = -1;
  var numOfColumns = 0;
  var numOfRows = 0;
  var finalData = [];
  var playersName = [];
  data.reverse()
  data.forEach(function(d) {
    //console.log(d);
      for(var propt in d) {
        // check if the property is a number
        if (!isNaN(d[propt])) {
          var v = parseInt(d[propt]);
          //console.log("propt: " + propt + "\t" + d[propt]);          
          if (v>maxValue) {
            maxValue = v;
          } 
          
          var obj = new Object();
          obj.name = d.name;
          obj.value = v;
          obj.date = propt;
          finalData.push(obj);
        }
      }
      playersName.push(d.name);
      numOfRows++;
  });

console.log(playersName);
  //maxValue = d3.max(finalData, function (d) { return d.value; });
  numOfColumns = finalData.length / numOfRows;

  console.log("numOfRows= " + numOfRows);
  console.log("numOfColumns= " + numOfColumns);

  var cellWidth = chartWidth / numOfColumns;
  console.log("cellWidth= " + cellWidth);
  var cellHeight = height / numOfRows;
  console.log("cellHeight= " + cellHeight);
  colorScale.domain([0, maxValue]);

  svg.selectAll("rect")
    .data(finalData)
    .enter()
    .append("rect")
    .attr("x", function (d, i) {
      var xVal = cellWidth * (i%numOfColumns);
      //console.log("i: " + i); 
      //console.log("\tx: " + x); 
      return xVal;
    })
    .attr("y", function (d, i) {
      var yVal = height - cellHeight * (Math.floor(i/numOfColumns)+1)
      //onsole.log("i: " + i); 
      //console.log("\ty: " + y)
      return yVal;
    })
    .attr("width", cellWidth)
    .attr("height", cellHeight)
    .style("fill", function(d, i) {
      return colorScale(d.value);       
    })
    .on("mouseover", function(d) {
          tooltip.html("<font size='2'><b>Name:</b> " + d.name + "</br><b>Date</b>: " + d.date + "<br><b>Mentions</b>: " + d.value + "</font>");
          tooltip.style("visibility", "visible");
          //this.style.cursor = "hand";
      })
      .on("mousemove", function(){
        // d3.event must be used to retrieve pageY and pageX. While this is not needed in Chrome, it is needed in Firefox
        tooltip.style("top", (d3.event.pageY-5)+"px").style("left",(d3.event.pageX+5)+"px");

      })
      .on("mouseout", function(){
          tooltip.style("visibility", "hidden");
          //this.style.cursor = "auto";
        })

 // Add an x-axis with label.
 var xScale = d3.scale.linear()
                     .domain([7, 20])
                     .range([0, chartWidth]);

  var xAxis = d3.svg.axis()
                  .scale(xScale)
                  .tickFormat(function(d) { return d + " Jul"; })
                  .orient("bottom");
  svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis)
    /*.append("text")
      .attr("x", chartWidth + 70)
      .attr("y", 15)
      .attr("text-anchor", "end")
      .text("(Day of July)");*/

   // Y Axis
   playersName.reverse();
  svg.selectAll(".players")
  .data(playersName)
  .enter()
  .append("text")
    .attr("x", function (d, i) { return chartWidth + 10; })
    .attr("y", function (d, i) { return (i * cellHeight) + cellHeight/2 + 4 })
    .attr("fill", "black")
    .text(function (d) { return d; });

});

     </script>
   </body>
 </html>